import{_ as y,r as f,o as u,c as _,a as V,d as e,F as b,f as g,h as k,t as n,b as r,w as P,i as v,v as E,n as h,j as I}from"./index-5583e804.js";const{VITE_APP_URL:d,VITE_APP_PATH:i}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"brad5566",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0},U={data(){return{products:[],productId:"",cart:{},loadingItem:"",form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{getCarts(){this.$http({method:"get",url:`${d}api/${i}/cart`}).then(a=>{this.cart=a.data.data})},updateCartItem(a){const s={product_id:a.product.id,qty:a.qty};this.$http({method:"put",url:`${d}api/${i}/cart/${a.id}`,data:{data:s}}).then(x=>{this.getCarts()})},deleteCartItem(a){this.$http({method:"delete",url:`${d}api/${i}/cart/${a.id}`}).then(s=>{this.getCarts()})},createOrder(){const a=this.form;this.$http({method:"post",url:`${d}api/${i}/order`,data:{data:a}}).then(s=>{alert(s.data.message),this.$refs.form.resetForm(),this.getCarts(),this.form.message=""})},deleteAllCarts(){this.$http({method:"delete",url:`${d}api/${i}/carts`}).then(a=>{this.getCarts()})}},mounted(){this.getCarts()}},q={class:"table align-middle"},A=e("thead",null,[e("tr",null,[e("th"),e("th",null,"品名"),e("th",{style:{width:"150px"}},"數量/單位"),e("th",{class:"text-end"},"總價")])],-1),T=["onClick"],$={class:"input-group input-group-sm"},w=["onChange","onUpdate:modelValue"],F=["value"],D={class:"text-end"},S=e("td",{colspan:"3",class:"text-end"},"總計",-1),B={class:"text-end"},L=e("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),N={class:"text-end text-success"},O=e("hr",null,null,-1),R={class:"my-5 row justify-content-center"},M={class:"mb-3"},j=e("label",{for:"email",class:"form-label"},"Email",-1),H={class:"mb-3"},z=e("label",{for:"name",class:"form-label"},"收件人姓名",-1),G={class:"mb-3"},J=e("label",{for:"tel",class:"form-label"},"收件人電話",-1),K={class:"mb-3"},Q=e("label",{for:"address",class:"form-label"},"收件人地址",-1),W={class:"mb-3"},X=e("label",{for:"message",class:"form-label"},"留言",-1),Y=e("div",{class:"text-end"},[e("button",{type:"submit",class:"btn btn-danger"},"送出訂單")],-1);function Z(a,s,x,ee,l,p){const c=f("VField"),m=f("error-message"),C=f("VForm");return u(),_(b,null,[V(" 購物車頁面 "),e("table",q,[A,e("tbody",null,[l.cart.carts?(u(!0),_(b,{key:0},g(l.cart.carts,o=>(u(),_("tr",{key:o.id},[e("td",null,[e("button",{onClick:t=>p.deleteCartItem(o),type:"button",class:"btn btn-outline-danger btn-sm"}," x ",8,T)]),e("td",null,n(o.product.title),1),e("td",null,[e("div",$,[v(e("select",{onChange:t=>p.updateCartItem(o),name:"",id:"",class:"form-select","onUpdate:modelValue":t=>o.qty=t},[(u(),_(b,null,g(20,t=>e("option",{key:`${t}34`,value:t},n(t),9,F)),64))],40,w),[[E,o.qty]])])]),e("td",D,n(o.total),1)]))),128)):k("",!0)]),e("tfoot",null,[e("tr",null,[S,e("td",B,n(l.cart.final_total),1)]),e("tr",null,[L,e("td",N,n(l.cart.final_total),1)])])]),V(" 這是表單 "),O,e("div",R,[r(C,{ref:"form",class:"col-md-6",onSubmit:p.createOrder},{default:P(({errors:o})=>[e("div",M,[j,r(c,{id:"email",name:"email",type:"email",class:h(["form-control",{"is-invalid":o.email}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:l.form.user.email,"onUpdate:modelValue":s[0]||(s[0]=t=>l.form.user.email=t)},null,8,["class","modelValue"]),r(m,{name:"email",class:"invalid-feedback"})]),e("div",H,[z,r(c,{id:"name",name:"姓名",type:"text",class:h(["form-control",{"is-invalid":o.姓名}]),placeholder:"請輸入姓名",rules:"required",modelValue:l.form.user.name,"onUpdate:modelValue":s[1]||(s[1]=t=>l.form.user.name=t)},null,8,["class","modelValue"]),r(m,{name:"姓名",class:"invalid-feedback"})]),e("div",G,[J,r(c,{id:"tel",name:"電話",type:"text",class:h(["form-control",{"is-invalid":o.電話}]),placeholder:"請輸入電話",rules:"required|min:8|max:10",modelValue:l.form.user.tel,"onUpdate:modelValue":s[2]||(s[2]=t=>l.form.user.tel=t)},null,8,["class","modelValue"]),r(m,{name:"電話",class:"invalid-feedback"})]),e("div",K,[Q,r(c,{id:"address",name:"地址",type:"text",class:h(["form-control",{"is-invalid":o.地址}]),placeholder:"請輸入地址",rules:"required",modelValue:l.form.user.address,"onUpdate:modelValue":s[3]||(s[3]=t=>l.form.user.address=t)},null,8,["class","modelValue"]),r(m,{name:"地址",class:"invalid-feedback"})]),e("div",W,[X,v(e("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":s[4]||(s[4]=t=>l.form.message=t)},null,512),[[I,l.form.message]])]),Y]),_:1},8,["onSubmit"])])],64)}const se=y(U,[["render",Z]]);export{se as default};
